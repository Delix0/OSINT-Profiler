<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSINT Report - {{ target.personal.full_name if target.personal.full_name else 'Report' }}</title>
    <link rel="stylesheet" href="../static/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üïµÔ∏è OSINT PROFILER</h1>
            <div class="header-meta">
                <span class="timestamp">
                    <i class="fas fa-clock"></i>
                    –°–æ–∑–¥–∞–Ω–æ: {{ generated_at.strftime('%Y-%m-%d %H:%M:%S') }}
                </span>
                <span class="target-id">
                    <i class="fas fa-id-card"></i>
                    ID: {{ target.id }}
                </span>
            </div>
        </header>

        <!-- Profile Card -->
        <section class="profile-card">
            <div class="profile-photo">
                {% if target.personal.photo_url %}
                    <img src="{{ target.personal.photo_url }}" alt="Photo">
                {% else %}
                    <div class="photo-placeholder">
                        <i class="fas fa-user"></i>
                    </div>
                {% endif %}
            </div>
            <div class="profile-info">
                <h2 class="name">{{ target.personal.full_name }}</h2>
                {% if target.personal.birth_date %}
                <p class="meta">
                    <i class="fas fa-birthday-cake"></i>
                    {{ target.personal.birth_date|format_date }} 
                    ({{ target.personal.birth_date|age }} –ª–µ—Ç)
                </p>
                {% endif %}
                {% if target.personal.birth_place %}
                <p class="meta">
                    <i class="fas fa-map-marker-alt"></i>
                    {{ target.personal.birth_place }}
                </p>
                {% endif %}
                {% if target.personal.gender %}
                <p class="meta">
                    <i class="fas fa-venus-mars"></i>
                    {% if target.personal.gender == 'male' %}–ú—É–∂—Å–∫–æ–π
                    {% elif target.personal.gender == 'female' %}–ñ–µ–Ω—Å–∫–∏–π
                    {% else %}{{ target.personal.gender }}{% endif %}
                </p>
                {% endif %}
                {% if target.personal.aliases %}
                <div class="aliases">
                    <span class="label"><strong>–ü—Å–µ–≤–¥–æ–Ω–∏–º—ã:</strong></span>
                    {% for alias in target.personal.aliases %}
                    <span class="alias-tag">{{ alias }}</span>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </section>

        <!-- Stats -->
        {% if target.stats %}
        <div class="stats-grid">
            <div class="stat-card">
                <i class="fas fa-share-alt"></i>
                <span class="stat-value">{{ target.stats.social_accounts|default(0) }}</span>
                <span class="stat-label">–°–æ—Ü—Å–µ—Ç–∏</span>
            </div>
            <div class="stat-card">
                <i class="fas fa-users"></i>
                <span class="stat-value">{{ target.stats.connections|default(0) }}</span>
                <span class="stat-label">–°–≤—è–∑–∏</span>
            </div>
            <div class="stat-card">
                <i class="fas fa-map-pin"></i>
                <span class="stat-value">{{ target.stats.addresses|default(0) }}</span>
                <span class="stat-label">–ê–¥—Ä–µ—Å–∞</span>
            </div>
            <div class="stat-card">
                <i class="fas fa-briefcase"></i>
                <span class="stat-value">{{ target.stats.jobs|default(0) }}</span>
                <span class="stat-label">–†–∞–±–æ—Ç–∞</span>
            </div>
            <div class="stat-card">
                <i class="fas fa-graduation-cap"></i>
                <span class="stat-value">{{ target.stats.education|default(0) }}</span>
                <span class="stat-label">–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</span>
            </div>
            <div class="stat-card">
                <i class="fas fa-home"></i>
                <span class="stat-value">{{ target.stats.family|default(0) }}</span>
                <span class="stat-label">–°–µ–º—å—è</span>
            </div>
        </div>
        {% endif %}

        <!-- Contacts -->
        {% if target.contacts %}
        <section class="data-section">
            <h3 class="section-title">
                <i class="fas fa-address-book"></i>
                –ö–æ–Ω—Ç–∞–∫—Ç—ã
            </h3>
            <div class="contacts-grid">
                {% if target.contacts.phones %}
                <div class="contact-group">
                    <div class="contact-label">üìû –¢–µ–ª–µ—Ñ–æ–Ω—ã</div>
                    {% for phone in target.contacts.phones %}
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <a href="tel:{{ phone }}">{{ phone }}</a>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
                
                {% if target.contacts.emails %}
                <div class="contact-group">
                    <div class="contact-label">‚úâÔ∏è Email</div>
                    {% for email in target.contacts.emails %}
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <a href="mailto:{{ email }}">{{ email }}</a>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
                
                {% if target.contacts.messengers %}
                <div class="contact-group">
                    <div class="contact-label">üí¨ –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã</div>
                    {% for messenger, handle in target.contacts.messengers.items() %}
                    <div class="contact-item">
                        <i class="fab fa-{{ messenger|lower }}"></i>
                        <span>{{ handle }}</span>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </section>
        {% endif %}

        <!-- Social Media -->
        {% if target.social_media %}
        <section class="data-section">
            <h3 class="section-title">
                <i class="fas fa-hashtag"></i>
                –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏
            </h3>
            <div class="social-grid">
                {% for social in target.social_media %}
                <div class="social-card">
                    <div class="social-header">
                        <i class="fab fa-{{ social.platform|lower }}"></i>
                        <span class="platform-name">{{ social.platform|upper }}</span>
                    </div>
                    <a href="{{ social.url }}" target="_blank" class="social-username">
                        @{{ social.username }}
                    </a>
                    <div class="social-stats">
                        <span><i class="fas fa-users"></i> {{ social.followers|default(0) }}</span>
                        <span><i class="fas fa-images"></i> {{ social.posts_count|default(0) }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- Family -->
        {% if target.family %}
        <section class="data-section">
            <h3 class="section-title">
                <i class="fas fa-home"></i>
                –°–µ–º—å—è
            </h3>
            <div class="family-tree">
                {% for member in target.family %}
                <div class="family-member">
                    <div class="member-relation">{{ member.relation|title }}</div>
                    <div class="member-name">{{ member.full_name }}</div>
                    {% if member.birth_date %}
                    <div class="member-info">
                        <i class="fas fa-calendar"></i>
                        {{ member.birth_date|format_date }} ({{ member.birth_date|age }} –ª–µ—Ç)
                    </div>
                    {% endif %}
                    {% if member.occupation %}
                    <div class="member-info">
                        <i class="fas fa-briefcase"></i>
                        {{ member.occupation }}
                    </div>
                    {% endif %}
                    {% if member.workplace %}
                    <div class="member-info">
                        <i class="fas fa-building"></i>
                        {{ member.workplace }}
                    </div>
                    {% endif %}
                    {% if member.notes %}
                    <div class="member-info">
                        <i class="fas fa-note"></i>
                        {{ member.notes }}
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- Education -->
        {% if target.education %}
        <section class="data-section">
            <h3 class="section-title">
                <i class="fas fa-graduation-cap"></i>
                –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
            </h3>
            <div class="timeline">
                {% for edu in target.education %}
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <div class="timeline-header">
                            <h4>{{ edu.institution }}</h4>
                            <span class="timeline-date">
                                {{ edu.start_date|format_date('%m.%Y') }} - 
                                {{ edu.end_date|format_date('%m.%Y') if edu.end_date else '–Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è' }}
                            </span>
                        </div>
                        {% if edu.location %}
                        <p class="timeline-location">
                            <i class="fas fa-map-marker-alt"></i>
                            {{ edu.location }}
                        </p>
                        {% endif %}
                        {% if edu.faculty %}
                        <p class="timeline-detail">
                            <i class="fas fa-book"></i>
                            {{ edu.faculty }}
                        </p>
                        {% endif %}
                        {% if edu.specialization %}
                        <p class="timeline-detail">
                            <i class="fas fa-flask"></i>
                            {{ edu.specialization }}
                        </p>
                        {% endif %}
                        {% if edu.degree %}
                        <span class="badge">{{ edu.degree }}</span>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- Employment -->
        {% if target.employment %}
        <section class="data-section">
            <h3 class="section-title">
                <i class="fas fa-briefcase"></i>
                –ö–∞—Ä—å–µ—Ä–∞
            </h3>
            <div class="timeline">
                {% for job in target.employment %}
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <div class="timeline-header">
                            <h4>{{ job.position }}</h4>
                            <span class="timeline-date">
                                {{ job.start_date|format_date('%m.%Y') }} - 
                                {{ job.end_date|format_date('%m.%Y') if job.end_date else 'üìç –ù–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è' }}
                            </span>
                        </div>
                        <p class="company-name">
                            <i class="fas fa-building"></i>
                            {{ job.company }}
                        </p>
                        {% if job.location %}
                        <p class="timeline-location">
                            <i class="fas fa-map-marker-alt"></i>
                            {{ job.location }}
                        </p>
                        {% endif %}
                        {% if job.description %}
                        <p class="timeline-description">
                            <i class="fas fa-info-circle"></i>
                            {{ job.description }}
                        </p>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- Addresses -->
        {% if target.addresses %}
        <section class="data-section">
            <h3 class="section-title">
                <i class="fas fa-map"></i>
                –ê–¥—Ä–µ—Å–∞
            </h3>
            <div class="addresses-list">
                {% for address in target.addresses %}
                <div class="address-card">
                    <div class="address-type">{{ address.type|title }}</div>
                    <div class="address-text">{{ address.address }}</div>
                    <div class="address-period">
                        <i class="fas fa-calendar-alt"></i>
                        {{ address.start_date|format_date }} - 
                        {{ address.end_date|format_date if address.end_date else '–Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è' }}
                    </div>
                    {% if address.notes %}
                    <div class="address-period">
                        <i class="fas fa-sticky-note"></i>
                        {{ address.notes }}
                    </div>
                    {% endif %}
                    {% if address.coordinates and address.coordinates.lat and address.coordinates.lon %}
                    <div class="address-period">
                        <i class="fas fa-map-pin"></i>
                        {{ "%.4f"|format(address.coordinates.lat) }}, {{ "%.4f"|format(address.coordinates.lon) }}
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- Connections -->
        {% if target.connections %}
        <section class="data-section">
            <h3 class="section-title">
                <i class="fas fa-project-diagram"></i>
                –ì—Ä–∞—Ñ —Å–≤—è–∑–µ–π
            </h3>
            <div class="connections-list">
                {% for connection in target.connections %}
                <div class="connection-card">
                    <div class="connection-header">
                        <span class="connection-name">{{ connection.name }}</span>
                        <span class="connection-relation">{{ connection.relation }}</span>
                    </div>
                    <div class="connection-context">{{ connection.context }}</div>
                    <div class="connection-meta">
                        <span class="source-tag">
                            <i class="fas fa-database"></i> {{ connection.source }}
                        </span>
                        <span class="strength-indicator">
                            {% for i in range(connection.strength|default(0)) %}
                            <i class="fas fa-star"></i>
                            {% endfor %}
                        </span>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- Assets -->
        {% if target.assets and (target.assets.vehicles or target.assets.property) %}
        <section class="data-section">
            <h3 class="section-title">
                <i class="fas fa-car"></i>
                –ê–∫—Ç–∏–≤—ã
            </h3>
            <div class="assets-grid">
                {% if target.assets.vehicles %}
                    {% for vehicle in target.assets.vehicles %}
                    <div class="asset-card">
                        <div class="asset-type">–ê–≤—Ç–æ–º–æ–±–∏–ª—å</div>
                        <div class="asset-title">{{ vehicle.brand }} {{ vehicle.model }} ({{ vehicle.year }})</div>
                        <div class="asset-detail">
                            <i class="fas fa-hashtag"></i> {{ vehicle.plate_number }}
                        </div>
                        <div class="asset-detail">
                            <i class="fas fa-palette"></i> {{ vehicle.color }}
                        </div>
                    </div>
                    {% endfor %}
                {% endif %}
                {% if target.assets.property %}
                    {% for prop in target.assets.property %}
                    <div class="asset-card">
                        <div class="asset-type">{{ prop.type|title }}</div>
                        <div class="asset-title">{{ prop.address }}</div>
                        <div class="asset-detail">
                            <i class="fas fa-tag"></i> {{ prop.ownership }}
                        </div>
                        {% if prop.purchase_date %}
                        <div class="asset-detail">
                            <i class="fas fa-calendar"></i> –ü—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–æ: {{ prop.purchase_date|format_date }}
                        </div>
                        {% endif %}
                    </div>
                    {% endfor %}
                {% endif %}
            </div>
        </section>
        {% endif %}

                <!-- Timeline Events -->
        {% if target.timeline %}
        <section class="data-section">
            <h3 class="section-title">
                <i class="fas fa-clock"></i>
                –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è —Å–æ–±—ã—Ç–∏–π
            </h3>
            <div class="events-timeline">
                {% for event in target.timeline %}
                <div class="event-item">
                    <div class="event-date">{{ event.date|format_date }}</div>
                    <div class="event-content">
                        <div class="event-title">{{ event.event }}</div>
                        {% if event.location %}
                        <div class="event-location">
                            <i class="fas fa-map-marker-alt"></i> {{ event.location }}
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- Notes -->
        {% if target.notes %}
        <section class="data-section">
            <h3 class="section-title">
                <i class="fas fa-sticky-note"></i>
                –ó–∞–º–µ—Ç–∫–∏
            </h3>
            <div class="notes-content">
                {{ target.notes }}
            </div>
        </section>
        {% endif %}

        <!-- Tags -->
        {% if target.tags %}
        <section class="data-section">
            <h3 class="section-title">
                <i class="fas fa-tags"></i>
                –¢–µ–≥–∏
            </h3>
            <div class="tags-container">
                {% for tag in target.tags %}
                <span class="tag">{{ tag }}</span>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- Footer -->
        <footer class="footer">
            <p><strong>OSINT Profiler</strong> ¬© 2025 | –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç</p>
            <p class="footer-meta">
                Target ID: {{ target.id }} | 
                –°–æ–∑–¥–∞–Ω–æ: {{ target.created_at|format_date('%Y-%m-%d %H:%M') if target.created_at else 'N/A' }} | 
                –û–±–Ω–æ–≤–ª–µ–Ω–æ: {{ target.updated_at|format_date('%Y-%m-%d %H:%M') if target.updated_at else 'N/A' }}
            </p>
        </footer>
    </div>
</body>
</html>
